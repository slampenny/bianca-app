[from-twilio]
exten => bianca,1,NoOp(Incoming call to bianca exten from ${CALLERID(all)})
  ; Read the To header
  same => n,Set(TO_HEADER_RAW=${PJSIP_HEADER(read,To)})
  same => n,NoOp(Raw To Header: ${TO_HEADER_RAW})

  ; Extract the content within the angle brackets <>
  ; This should be like: sip:user@host;transport=tcp;callSid=XXX;patientId=YYY
  same => n,Stasis(myphonefriend,${PJSIP_HEADER(read,To)})
  same => n,Hangup()

[bianca-app]
exten => _X.,1,NoOp(Outgoing call from Bianca: ${EXTEN})
  same => n,Dial(PJSIP/${EXTEN}@twilio-trunk)
  same => n,Hangup()

[unauthorized]
exten => _X.,1,NoOp(ðŸš« Unauthorized SIP attempt from ${CALLERID(all)})
  same => n,Hangup()

[playback-context]
; Context for Local channels created by ARI for OpenAI audio playback
exten => _playback-.,1,NoOp(Playback channel for OpenAI audio: ${EXTEN})
 same => n,Answer()  ; Answer here in dialplan
 same => n,Stasis(myphonefriend,${EXTEN})
 same => n,Hangup()
